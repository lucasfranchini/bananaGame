(()=>{"use strict";class t extends class{constructor(t,e,s,i,h,a,n){this.context=e,this._x=s,this._y=i,this._speedX=0,this._speedY=0,this._img=new Image(a,n),this._img.src=h,this._canvas=t}draw(){const t=this._img.width,e=this._img.height;this.context.drawImage(this._img,this._x-t,this._y-e,t,e)}move(){this._x+=this._speedX,this._y+=this._speedY}}{constructor(t,e,s,i,h){super(t,e,s,i,"/assets/alien.png",64,97),this._maxLife=h,this._actualLife=h}updateState(){this.move(),this.stopOnEdge()}startMove(t){"ArrowRight"===t.key?this._speedX=5:"ArrowLeft"===t.key&&(this._speedX=-5)}endMove(t){"ArrowRight"===t.key&&5===this._speedX&&(this._speedX=0),"ArrowLeft"===t.key&&-5===this._speedX&&(this._speedX=0)}stopOnEdge(){this._x-this._img.width<0&&(this._x=0+this._img.width),this._x>this._canvas.width&&(this._x=this._canvas.width)}}const e=window.innerWidth,s=window.innerHeight,i=document.querySelector("#canvas"),h=new class{constructor(t,e,s){this._canvas=s,this._canvas.width=t,this._canvas.height=e,this._context=s.getContext("2d")}start(){this._player=new t(this._canvas,this._context,this._canvas.width/2,this._canvas.height-25,4),this.updateScore(0),clearInterval(this._gameIntervalId),this._gameIntervalId=window.setInterval((()=>this.loop()),1e3/60)}updateScore(t){const e=document.querySelector(".score");t-this._score>0&&(e.classList.add("highlight"),setTimeout((()=>e.classList.remove("highlight")),100)),this._score=t,e.innerText="Score: "+this._score.toFixed(1)}loop(){this._player.updateState(),this.renderGame()}renderGame(){this.clearScreen(),this._player.draw()}clearScreen(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}onKeyDown(t){this._player.startMove(t)}onKeyUp(t){this._player.endMove(t)}}(e,s,i);h.start(),window.addEventListener("keyup",(t=>{h.onKeyUp(t)})),window.addEventListener("keydown",(t=>{h.onKeyDown(t)}))})();